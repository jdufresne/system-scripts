- name: Install MariaDB
  dnf:
    name:
      - mariadb
      - mariadb-common
      - mariadb-devel
      - mariadb-server
  become: yes

- name: Copy MariaDB configuration
  copy:
    src: "{{ item }}"
    dest: /etc/my.cnf.d/
    owner: root
    group: root
    mode: 0644
  with_items:
    - utf8.cnf
    - nondurable.cnf
  become: yes

- name: Start MariaDB server
  systemd:
    name: mariadb
    state: started
  become: yes

- name:
  shell: mysql_tzinfo_to_sql /usr/share/zoneinfo | mysql -u root mysql

- name: Stop MariaDB server
  systemd:
    name: mariadb
    state: stopped
  become: yes
